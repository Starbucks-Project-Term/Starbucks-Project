<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: maps.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: maps.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const request = require('request');
const fs = require('fs');
var list_of_places=[];
/**
*This function is used to get Sbs near you based on the coordinates. THIS IS A TEST
*It uses Google Place API. It creates a Promise and if the body.status=="OK", will return tuple of body and list of places
*@param {string} lat - Latitude of the position
*@param {string} long - Longtitude of the position
*/
var get_sturbuckses = (lat, long) => {
	return new Promise((resolve, reject) => {
		request({
			url: `https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=${lat},${long}&amp;radius=1000&amp;type=coffee&amp;keyword=starbucks&amp;key=AIzaSyD5Z4W9aUlSBLzI4mNzhc4Rl9iqZkqSKMc`,
			json: true
		}, (error, response, body) => {
			if(error){
				resolve('Can not connect to Maps');
			} else if (body.status === 'ZERO_RESULTS') {
                resolve('Cannot find requested address');
            } else if(body.status=="OK"){
				for(place in body.results){
					list_of_places.unshift(body.results[place].vicinity);
				}
                fs.writeFileSync('places.json', JSON.stringify(body));
                resolve({body,list_of_places});
                list_of_places = []
			}
		});
	});
};


/**
*This function is used to get address based on the word position and returns the latitude and longtitude
*@param {string} address - Address in words, that will be converted to the URI format
*@returns {dictionary} Dict of the long and lat of the address 
*/
var getAddress = (address) => {
    return new Promise((resolve,reject)=> {
    request({
        url: 'http://maps.googleapis.com/maps/api/geocode/json' +
            '?address=' + encodeURIComponent(address),
        json: true
    }, (error, response, body) => {
        if (error) {
            resolve('Cannot connect to Google Maps');
            //console.log('Cannot connect to Google Maps');
        } else if (body.status === 'ZERO_RESULTS') {
            resolve('Cannot find requested address');
        } else if (body.status === 'OK') {
            resolve({
                lat: body.results[0].geometry.location.lat,
                long: body.results[0].geometry.location.lng
            });
        }
    });
    })

};

module.exports ={
	get_sturbuckses,
	getAddress
};
module.exports.listofmaps = list_of_places;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#addLocations">addLocations</a></li><li><a href="global.html#addMarkerWithTimeout">addMarkerWithTimeout</a></li><li><a href="global.html#AddUsr">AddUsr</a></li><li><a href="global.html#checkLocations">checkLocations</a></li><li><a href="global.html#con">con</a></li><li><a href="global.html#defMap">defMap</a></li><li><a href="global.html#errorMessages">errorMessages</a></li><li><a href="global.html#generateSalt">generateSalt</a></li><li><a href="global.html#get_sturbuckses">get_sturbuckses</a></li><li><a href="global.html#getAddress">getAddress</a></li><li><a href="global.html#getLocation">getLocation</a></li><li><a href="global.html#getMap">getMap</a></li><li><a href="global.html#hash_data">hash_data</a></li><li><a href="global.html#initMap">initMap</a></li><li><a href="global.html#initMultPlaceMap">initMultPlaceMap</a></li><li><a href="global.html#LoadAccfile">LoadAccfile</a></li><li><a href="global.html#loadUserdata">loadUserdata</a></li><li><a href="global.html#Login">Login</a></li><li><a href="global.html#LoginCheck">LoginCheck</a></li><li><a href="global.html#PasswordCheck">PasswordCheck</a></li><li><a href="global.html#place_marker">place_marker</a></li><li><a href="global.html#request_coodrs">request_coodrs</a></li><li><a href="global.html#savelocation">savelocation</a></li><li><a href="global.html#send_email">send_email</a></li><li><a href="global.html#send_mail">send_mail</a></li><li><a href="global.html#showfavs">showfavs</a></li><li><a href="global.html#UserNameCheck">UserNameCheck</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Fri May 18 2018 17:03:40 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
